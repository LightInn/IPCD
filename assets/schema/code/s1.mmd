flowchart TB
    Backend["Metadata Server"]
    Vault["Keys Vault"]
    Client["Neova SDK"]
    Selector["Algorithm"]
    P1["Provider Node A"]
    P2["Provider Node B"]
    P3["Provider Node C"]
    Client -->|"1-File Request (CID)"| Backend
    Backend -->|"2-Candidate Node List (multiaddrs)"| Client
    Client -->|"Key Request"| Vault
    Vault -->|"Decryption Key"| Client
    Client --> Selector
    Selector -->|"3-Performance Benchmark (Ping + mini-handshake)"| P1
    Selector -->|"3-Performance Benchmark"| P2
    Selector -->|"3-Performance Benchmark"| P3
    Selector -->|"4-Direct Bitswap Transfer"| P2
