---
config:
  theme: neutral
  look: handDrawn
---
flowchart TB
    Backend["Neova Backend<br/>(Metadata Server)"]
    Vault["Hashicorp<br/>(Keys)"]
    Client{{"Smart Client<br/>(Neova SDK)"}}
    Selector{"Selection<br/>Algorithm"}
    P1[("Provider Node A<br/>IPFS + Superviseur")]
    P2[("Provider Node B<br/>IPFS + Superviseur")]
    P3[("Provider Node C<br/>IPFS + Superviseur")]
    Client -->|"1-File Request (CID)"| Backend
    Backend -->|"2-Candidate Node List (multiaddrs)"| Client
    Client -->|"Key Request"| Vault
    Vault -->|"Decryption Key"| Client
    Client --> Selector
    Selector -->|"3-Performance Benchmark (Ping + mini-handshake)"| P1
    Selector -->|"3-Performance Benchmark"| P2
    Selector -->|"3-Performance Benchmark"| P3
    Selector -->|"4-Direct Bitswap Transfer"| P2
